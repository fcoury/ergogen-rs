# Fixtures

This directory is for upstream Ergogen fixtures (YAML/JSON inputs) and their corresponding golden outputs used to validate behavioral equivalence during the Rust migration.

## Provenance

When fixtures are imported, record:

- The upstream repository URL
- The exact upstream commit hash
- The subset of fixtures copied and any modifications made for this repo

## Imported Fixtures

### M1

- `fixtures/m1/minimal.yaml`: local minimal fixture for units parsing.

### M2

- Upstream repo: `git@github.com:ergogen/ergogen.git`
- Upstream commit: `8286e18f18ac064aa6d2ebca9c449bf2f6ba4d37`
- Source directory: `test/points/`
- Imported inputs:
  - `fixtures/m2/upstream/points_default.yaml`
  - `fixtures/m2/upstream/points_units.yaml`
  - `fixtures/m2/upstream/points_overrides.yaml`
  - `fixtures/m2/upstream/points_mirrors.yaml`
  - `fixtures/m2/upstream/points_rotations.yaml`
- Canonical snapshots (generated by `cargo run -p ergogen-parser --example prepare -- <yaml>`):
  - `fixtures/m2/upstream/*.canonical.json`

### M3

- Upstream repo: `git@github.com:ergogen/ergogen.git`
- Upstream commit: `8286e18f18ac064aa6d2ebca9c449bf2f6ba4d37`
- Source directory: `test/points/`
- Imported fixtures + references:
  - `fixtures/m3/points/*.yaml`
  - `fixtures/m3/points/*___points.json`
  - `fixtures/m3/points/*___units.json`
  - `fixtures/m3/points/*___EXCEPTION.txt`
  - `fixtures/m3/points/*___*.dxf` (not asserted by the Rust tests yet)

### M5

- Upstream repo: `git@github.com:ergogen/ergogen.git`
- Upstream commit: `8286e18f18ac064aa6d2ebca9c449bf2f6ba4d37`
- Source directory: `test/outlines/`
- Imported fixtures + references:
  - `fixtures/m5/outlines/*.yaml`
  - `fixtures/m5/outlines/*___outlines_*_dxf.dxf` (currently parsed/normalized by `ergogen-export` tests; semantic compare comes in M6)

### M6

- Local fixture covering injected footprint PCB output:
  - `fixtures/m6/pcbs/injected.yaml`
  - `fixtures/m6/pcbs/injected___pcbs_pcb.kicad_pcb`

### Upstream (Full Test Suite Import)

- Upstream repo: `git@github.com:ergogen/ergogen.git`
- Upstream commit: `8286e18f18ac064aa6d2ebca9c449bf2f6ba4d37`
- Source directory: `test/`
- Imported directories:
  - `fixtures/upstream/test/points/`
  - `fixtures/upstream/test/outlines/`
  - `fixtures/upstream/test/cases/`
  - `fixtures/upstream/test/pcbs/`
  - `fixtures/upstream/test/footprints/`
  - `fixtures/upstream/test/cli/`
- Harness:
  - `crates/ergogen-cli/tests/upstream_suite.rs` runs the imported integration fixtures against the Rust implementation, comparing points/units, points demo DXF, outlines DXF, cases JSCAD, and KiCad PCB outputs (0 skips across points/outlines/cases/pcbs/footprints).
  - `crates/ergogen-cli/tests/cli_suite.rs` exercises the upstream CLI fixtures (including logs, errors, and reference outputs) using the imported inputs below.

### Upstream CLI Fixture Inputs

- Upstream repo: `git@github.com:ergogen/ergogen.git`
- Upstream commit: `8286e18f18ac064aa6d2ebca9c449bf2f6ba4d37`
- Source directory: `test/fixtures/`
- Imported inputs:
  - `fixtures/upstream/fixtures/atreus_kle.json`
  - `fixtures/upstream/fixtures/big.yaml`
  - `fixtures/upstream/fixtures/bundle/`
  - `fixtures/upstream/fixtures/bundle.zip`
  - `fixtures/upstream/fixtures/medium.yaml`
  - `fixtures/upstream/fixtures/minimal_kle.json`
  - `fixtures/upstream/fixtures/minimal.yaml`
  - `fixtures/upstream/fixtures/minimal.yml`
